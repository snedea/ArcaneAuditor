<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Arcane Auditor Academy - Master the 42 Rules</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #9b59b6;
            box-shadow: 0 0 30px rgba(155, 89, 182, 0.3);
        }

        .header h1 {
            font-size: 2.5em;
            color: #9b59b6;
            text-shadow: 0 0 20px rgba(155, 89, 182, 0.8);
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            color: #b8b8b8;
            font-style: italic;
        }

        .progress-bar {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #444;
        }

        .progress-stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat {
            background: linear-gradient(135deg, #2e2e3e, #1a1a2e);
            padding: 15px 25px;
            border-radius: 8px;
            border: 1px solid #9b59b6;
            text-align: center;
        }

        .stat-label {
            font-size: 0.9em;
            color: #888;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.5em;
            color: #9b59b6;
            font-weight: bold;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .nav-tab {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #555;
            color: #e8e8e8;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
        }

        .nav-tab:hover {
            border-color: #9b59b6;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.3);
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            border-color: #9b59b6;
            box-shadow: 0 0 20px rgba(155, 89, 182, 0.5);
        }

        .content-area {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid #444;
            min-height: 500px;
        }

        .spellbook-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .spellbook-card {
            background: linear-gradient(135deg, #2e2e3e, #1a1a2e);
            border: 2px solid #555;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .spellbook-card:hover {
            border-color: #9b59b6;
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(155, 89, 182, 0.4);
        }

        .spellbook-card.completed {
            border-color: #2ecc71;
        }

        .spellbook-title {
            font-size: 1.4em;
            color: #9b59b6;
            margin-bottom: 10px;
        }

        .spellbook-desc {
            color: #b8b8b8;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .spellbook-progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #444;
        }

        .rule-list {
            list-style: none;
        }

        .rule-item {
            background: linear-gradient(135deg, #2e2e3e, #1a1a2e);
            border-left: 4px solid #555;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .rule-item:hover {
            border-left-color: #9b59b6;
            transform: translateX(5px);
        }

        .rule-item.completed {
            border-left-color: #2ecc71;
            opacity: 0.8;
        }

        .rule-item.current {
            border-left-color: #e74c3c;
            background: linear-gradient(135deg, #3e2e3e, #2a1a2e);
        }

        .rule-number {
            display: inline-block;
            background: #9b59b6;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            margin-right: 10px;
        }

        .rule-name {
            font-weight: bold;
            color: #e8e8e8;
        }

        .lesson-view {
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lesson-header {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .lesson-title {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .lesson-severity {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .severity-action {
            background: #e74c3c;
        }

        .severity-advice {
            background: #3498db;
        }

        .lesson-section {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #444;
        }

        .lesson-section h3 {
            color: #9b59b6;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .code-example {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            color: #2ecc71;
            margin: 10px 0;
            overflow-x: auto;
        }

        .code-bad {
            border-left: 4px solid #e74c3c;
        }

        .code-good {
            border-left: 4px solid #2ecc71;
        }

        .practice-area {
            margin-top: 30px;
            padding: 25px;
            background: rgba(155, 89, 182, 0.1);
            border: 2px dashed #9b59b6;
            border-radius: 10px;
        }

        .practice-question {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #f39c12;
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .answer-btn {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #555;
            color: #e8e8e8;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-size: 1em;
        }

        .answer-btn:hover {
            border-color: #9b59b6;
            background: rgba(155, 89, 182, 0.2);
        }

        .answer-btn.correct {
            border-color: #2ecc71;
            background: rgba(46, 204, 113, 0.2);
        }

        .answer-btn.incorrect {
            border-color: #e74c3c;
            background: rgba(231, 76, 60, 0.2);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(155, 89, 182, 0.5);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #555, #333);
        }

        .btn-success {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }

        .feedback {
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .feedback-success {
            background: rgba(46, 204, 113, 0.2);
            border: 2px solid #2ecc71;
        }

        .feedback-error {
            background: rgba(231, 76, 60, 0.2);
            border: 2px solid #e74c3c;
        }

        .challenge-mode {
            text-align: center;
        }

        .challenge-timer {
            font-size: 3em;
            color: #f39c12;
            margin: 20px 0;
        }

        .challenge-score {
            font-size: 2em;
            color: #2ecc71;
        }

        .hidden {
            display: none;
        }

        .badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 5px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            box-shadow: 0 3px 10px rgba(243, 156, 18, 0.3);
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .achievement-card {
            background: linear-gradient(135deg, #2e2e3e, #1a1a2e);
            border: 2px solid #555;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .achievement-card.unlocked {
            border-color: #f39c12;
            box-shadow: 0 5px 20px rgba(243, 156, 18, 0.3);
        }

        .achievement-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .achievement-card.locked {
            opacity: 0.4;
            filter: grayscale(100%);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧙‍♂️ The Arcane Auditor Academy</h1>
            <p>Master the 42 Sacred Rules of Code Quality</p>
        </div>

        <div class="progress-bar">
            <div class="progress-stats">
                <div class="stat">
                    <div class="stat-label">Wizard Level</div>
                    <div class="stat-value" id="playerLevel">1</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Experience</div>
                    <div class="stat-value"><span id="playerXP">0</span> / <span id="nextLevelXP">100</span></div>
                </div>
                <div class="stat">
                    <div class="stat-label">Rules Mastered</div>
                    <div class="stat-value"><span id="rulesCompleted">0</span> / 42</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Accuracy</div>
                    <div class="stat-value"><span id="accuracy">0</span>%</div>
                </div>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" data-view="spellbooks">📚 Spellbooks</button>
            <button class="nav-tab" data-view="practice">⚔️ Practice Mode</button>
            <button class="nav-tab" data-view="challenge">🏆 Challenge Mode</button>
            <button class="nav-tab" data-view="achievements">🎖️ Achievements</button>
        </div>

        <div class="content-area" id="contentArea">
            <!-- Content dynamically loaded here -->
        </div>
    </div>

    <script>
        // Game state
        const gameState = {
            playerLevel: 1,
            playerXP: 0,
            rulesCompleted: new Set(),
            totalCorrect: 0,
            totalAttempts: 0,
            achievements: new Set(),
            currentView: 'spellbooks',
            currentLesson: null
        };

        // Load saved progress
        function loadProgress() {
            const saved = localStorage.getItem('arcaneAuditorProgress');
            if (saved) {
                const data = JSON.parse(saved);
                gameState.playerLevel = data.playerLevel || 1;
                gameState.playerXP = data.playerXP || 0;
                gameState.rulesCompleted = new Set(data.rulesCompleted || []);
                gameState.totalCorrect = data.totalCorrect || 0;
                gameState.totalAttempts = data.totalAttempts || 0;
                gameState.achievements = new Set(data.achievements || []);
            }
        }

        // Save progress
        function saveProgress() {
            const data = {
                playerLevel: gameState.playerLevel,
                playerXP: gameState.playerXP,
                rulesCompleted: Array.from(gameState.rulesCompleted),
                totalCorrect: gameState.totalCorrect,
                totalAttempts: gameState.totalAttempts,
                achievements: Array.from(gameState.achievements)
            };
            localStorage.setItem('arcaneAuditorProgress', JSON.stringify(data));
        }

        // Update UI
        function updateStats() {
            document.getElementById('playerLevel').textContent = gameState.playerLevel;
            document.getElementById('playerXP').textContent = gameState.playerXP;
            document.getElementById('nextLevelXP').textContent = gameState.playerLevel * 100;
            document.getElementById('rulesCompleted').textContent = gameState.rulesCompleted.size;
            const accuracy = gameState.totalAttempts > 0
                ? Math.round((gameState.totalCorrect / gameState.totalAttempts) * 100)
                : 0;
            document.getElementById('accuracy').textContent = accuracy;
        }

        // Add XP
        function addXP(amount) {
            gameState.playerXP += amount;
            const nextLevel = gameState.playerLevel * 100;

            if (gameState.playerXP >= nextLevel) {
                gameState.playerLevel++;
                gameState.playerXP -= nextLevel;
                showLevelUp();
            }

            updateStats();
            saveProgress();
        }

        function showLevelUp() {
            alert(`🎉 Level Up! You are now a Level ${gameState.playerLevel} Code Wizard!`);
        }

        // The 42 Rules database
        const rulesDatabase = {
            spellbooks: [
                {
                    id: 'modern-syntax',
                    title: '📜 Modern Syntax Spells',
                    description: 'Master the art of modern JavaScript syntax',
                    rules: [1, 11, 16, 17]
                },
                {
                    id: 'code-clarity',
                    title: '🔍 Code Clarity Enchantments',
                    description: 'Learn to write clear, readable code',
                    rules: [9, 10, 13, 14]
                },
                {
                    id: 'complexity-control',
                    title: '⚖️ Complexity Control Charms',
                    description: 'Tame complex code structures',
                    rules: [3, 4, 5, 6, 7]
                },
                {
                    id: 'dead-code-detection',
                    title: '💀 Dead Code Detection',
                    description: 'Identify and eliminate unused code',
                    rules: [2, 18, 20, 21, 22, 23]
                },
                {
                    id: 'type-consistency',
                    title: '🎯 Type Consistency Magic',
                    description: 'Ensure type safety and consistency',
                    rules: [15, 35]
                },
                {
                    id: 'optimization',
                    title: '⚡ Performance Optimization',
                    description: 'Write efficient, optimized code',
                    rules: [8, 12]
                },
                {
                    id: 'endpoint-mastery',
                    title: '🌐 Endpoint Mastery',
                    description: 'Perfect your API endpoint configurations',
                    rules: [24, 25, 26, 28, 29]
                },
                {
                    id: 'structure-rules',
                    title: '🏗️ Structure & Architecture',
                    description: 'Build solid code foundations',
                    rules: [27, 30, 31, 32, 33, 34, 36]
                },
                {
                    id: 'advanced-validation',
                    title: '🔮 Advanced Validation',
                    description: 'Master complex validation scenarios',
                    rules: [37, 38]
                },
                {
                    id: 'security-hardening',
                    title: '🛡️ Security Hardening',
                    description: 'Prevent hardcoded secrets and security issues',
                    rules: [19, 39, 40, 41, 42]
                }
            ],
            rules: {
                1: {
                    name: 'ScriptVarUsageRule',
                    title: 'The Spell of Modern Variables',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Use `let` and `const` instead of `var` to prevent scope-related bugs and clearly communicate code intent.',
                    why: 'Block-scoped variables prevent hoisting issues and accidental global scope pollution.',
                    bad: `var name = "wizard";
if (true) {
    var name = "apprentice"; // Overwrites outer scope!
}
console.log(name); // "apprentice" - unexpected!`,
                    good: `const name = "wizard";
if (true) {
    const name = "apprentice"; // Block scoped
}
console.log(name); // "wizard" - as expected!`,
                    quiz: {
                        question: 'Which code snippet properly uses block-scoped variables?',
                        options: [
                            { text: 'var count = 0; for (var i = 0; i < 10; i++) { count++; }', correct: false },
                            { text: 'let count = 0; for (let i = 0; i < 10; i++) { count++; }', correct: true },
                            { text: 'var count = 0; for (let i = 0; i < 10; i++) { count++; }', correct: false },
                            { text: 'All of the above are equally good', correct: false }
                        ],
                        explanation: 'Using `let` for both the counter and loop variable provides proper block scoping and prevents accidental variable leakage.'
                    }
                },
                2: {
                    name: 'ScriptDeadCodeRule',
                    title: 'Banishing Dead Code Spirits',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Detect and remove unused top-level declarations to reduce bundle size.',
                    why: 'Dead code increases bundle size, confuses developers, and may hide bugs.',
                    bad: `const unusedHelper = () => "never called";
const usedHelper = () => "active";

export function main() {
    return usedHelper(); // unusedHelper is dead code
}`,
                    good: `const usedHelper = () => "active";

export function main() {
    return usedHelper(); // Clean, no dead code
}`,
                    quiz: {
                        question: 'What is the main problem with dead code?',
                        options: [
                            { text: 'It causes syntax errors', correct: false },
                            { text: 'It increases bundle size and reduces code clarity', correct: true },
                            { text: 'It makes the code run slower', correct: false },
                            { text: 'It prevents compilation', correct: false }
                        ],
                        explanation: 'Dead code bloats your bundle and makes the codebase harder to understand, though it doesn\'t cause runtime errors.'
                    }
                },
                3: {
                    name: 'ScriptNestingLevelRule',
                    title: 'The Pyramid of Doom Prevention',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Limit nesting depth (default: 4 levels) to maintain readability.',
                    why: 'Deep nesting creates cognitive load and makes code hard to test and maintain.',
                    bad: `if (user) {
    if (user.isActive) {
        if (user.hasPermission) {
            if (user.credits > 0) {
                if (product.available) {
                    // Too deep! 5 levels
                    return true;
                }
            }
        }
    }
}`,
                    good: `if (!user || !user.isActive) return false;
if (!user.hasPermission || user.credits <= 0) return false;
if (!product.available) return false;
return true; // Much clearer!`,
                    quiz: {
                        question: 'What is the recommended maximum nesting depth?',
                        options: [
                            { text: '2 levels', correct: false },
                            { text: '4 levels', correct: true },
                            { text: '6 levels', correct: false },
                            { text: 'Unlimited', correct: false }
                        ],
                        explanation: 'The default maximum is 4 levels, though this can be configured. Use early returns to reduce nesting.'
                    }
                },
                4: {
                    name: 'ScriptComplexityRule',
                    title: 'Taming Cyclomatic Complexity',
                    category: 'Script Rules',
                    severity: 'ACTION',
                    description: 'Keep cyclomatic complexity under 10 per function for maintainability.',
                    why: 'High complexity makes functions hard to test, understand, and maintain.',
                    bad: `function processOrder(order) {
    if (order.type === 'A') {
        if (order.priority === 'high') { /*...*/ }
        else if (order.priority === 'low') { /*...*/ }
    } else if (order.type === 'B') {
        if (order.urgent) { /*...*/ }
        else { /*...*/ }
    } // Many more branches... complexity > 10
}`,
                    good: `function processOrder(order) {
    const handler = orderHandlers[order.type];
    return handler(order); // Delegated to simpler functions
}`,
                    quiz: {
                        question: 'What does cyclomatic complexity measure?',
                        options: [
                            { text: 'Number of lines of code', correct: false },
                            { text: 'Number of independent paths through code', correct: true },
                            { text: 'Number of variables', correct: false },
                            { text: 'Execution time', correct: false }
                        ],
                        explanation: 'Cyclomatic complexity counts the number of linearly independent paths, which correlates with testing difficulty.'
                    }
                },
                5: {
                    name: 'ScriptLongFunctionRule',
                    title: 'The Single Responsibility Principle',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Break down long functions that violate single-responsibility principles.',
                    why: 'Long functions are hard to understand, test, and reuse.',
                    bad: `function handleUserRegistration(data) {
    // 100+ lines validating
    // 50+ lines creating user
    // 75+ lines sending emails
    // 40+ lines logging
    // Way too long!
}`,
                    good: `function handleUserRegistration(data) {
    validateUserData(data);
    const user = createUser(data);
    sendWelcomeEmail(user);
    logRegistration(user);
    return user; // Each step is a focused function
}`,
                    quiz: {
                        question: 'Why should functions be kept short?',
                        options: [
                            { text: 'To save memory', correct: false },
                            { text: 'To improve readability, testability, and reusability', correct: true },
                            { text: 'To make code run faster', correct: false },
                            { text: 'It\'s just a style preference', correct: false }
                        ],
                        explanation: 'Short, focused functions are easier to understand, test in isolation, and reuse in different contexts.'
                    }
                },
                6: {
                    name: 'ScriptLongBlockRule',
                    title: 'Block Extraction Enchantment',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Extract oversized code blocks into separate functions.',
                    why: 'Large blocks within conditionals should be their own functions for clarity.',
                    bad: `if (isAdmin) {
    // 50+ lines of admin logic here
    // All embedded in the if block
    // Hard to test and reuse
}`,
                    good: `if (isAdmin) {
    handleAdminActions(); // Extracted to named function
}`,
                    quiz: {
                        question: 'When should you extract a code block into a function?',
                        options: [
                            { text: 'Only when it\'s used multiple times', correct: false },
                            { text: 'When it\'s large or represents a distinct operation', correct: true },
                            { text: 'Never, keep everything inline', correct: false },
                            { text: 'Only for loops', correct: false }
                        ],
                        explanation: 'Extract blocks when they\'re large or represent a conceptually distinct operation, even if used only once.'
                    }
                },
                7: {
                    name: 'ScriptFunctionParameterCountRule',
                    title: 'The Parameter Limit Spell',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Limit function parameters to reduce cognitive load.',
                    why: 'Too many parameters make functions hard to call correctly and understand.',
                    bad: `function createUser(name, email, age, address, phone, country, city, zip, preferences, role) {
    // 10 parameters - too confusing!
}`,
                    good: `function createUser(userData) {
    const { name, email, age, address, ...rest } = userData;
    // Single object parameter - much clearer!
}`,
                    quiz: {
                        question: 'What is a good maximum number of function parameters?',
                        options: [
                            { text: '2-3 parameters', correct: false },
                            { text: '4-5 parameters', correct: true },
                            { text: '10 parameters', correct: false },
                            { text: 'No limit needed', correct: false }
                        ],
                        explanation: 'Generally, 4-5 parameters is a reasonable limit. Beyond that, consider using an options object.'
                    }
                },
                8: {
                    name: 'ScriptConsoleLogRule',
                    title: 'Purging Debug Incantations',
                    category: 'Script Rules',
                    severity: 'ACTION',
                    description: 'Remove console.log() statements before production deployment.',
                    why: 'Debug logs can leak sensitive information and clutter production logs.',
                    bad: `function processPayment(card) {
    console.log("Card number:", card.number); // Security risk!
    console.log("Processing..."); // Debug leftover
    return charge(card);
}`,
                    good: `function processPayment(card) {
    logger.info("Processing payment"); // Proper logging
    return charge(card);
}`,
                    quiz: {
                        question: 'Why remove console.log from production code?',
                        options: [
                            { text: 'It makes code run slower', correct: false },
                            { text: 'It can leak sensitive data and clutter logs', correct: true },
                            { text: 'It causes errors', correct: false },
                            { text: 'It\'s fine to leave them', correct: false }
                        ],
                        explanation: 'Console.log can expose sensitive information and create noise in production logs. Use proper logging frameworks instead.'
                    }
                },
                9: {
                    name: 'ScriptVariableNamingRule',
                    title: 'The Naming Convention Charm',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Follow consistent naming conventions (typically camelCase).',
                    why: 'Consistent naming improves code readability and team collaboration.',
                    bad: `const user_name = "Alice";
const UserAge = 25;
const USERADDRESS = "123 Main St";`,
                    good: `const userName = "Alice";
const userAge = 25;
const userAddress = "123 Main St";`,
                    quiz: {
                        question: 'What is the standard JavaScript variable naming convention?',
                        options: [
                            { text: 'snake_case', correct: false },
                            { text: 'camelCase', correct: true },
                            { text: 'PascalCase', correct: false },
                            { text: 'kebab-case', correct: false }
                        ],
                        explanation: 'JavaScript uses camelCase for variables and functions, PascalCase for classes, and UPPER_CASE for constants.'
                    }
                },
                10: {
                    name: 'ScriptFunctionParameterNamingRule',
                    title: 'Parameter Naming Wisdom',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Use descriptive, convention-following parameter names.',
                    why: 'Clear parameter names make function signatures self-documenting.',
                    bad: `function calc(a, b, c) {
    return a * b + c; // What do these mean?
}`,
                    good: `function calculateTotal(price, quantity, tax) {
    return price * quantity + tax; // Crystal clear!
}`,
                    quiz: {
                        question: 'What makes a good parameter name?',
                        options: [
                            { text: 'Short and abbreviated', correct: false },
                            { text: 'Descriptive and meaningful', correct: true },
                            { text: 'Single letters for simplicity', correct: false },
                            { text: 'All caps for visibility', correct: false }
                        ],
                        explanation: 'Good parameter names clearly describe what the parameter represents, making the function self-documenting.'
                    }
                },
                11: {
                    name: 'ScriptArrayMethodUsageRule',
                    title: 'Functional Array Sorcery',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Prefer modern array methods (map, filter) over traditional loops.',
                    why: 'Functional methods are more declarative, less error-prone, and easier to chain.',
                    bad: `const doubled = [];
for (let i = 0; i < numbers.length; i++) {
    doubled.push(numbers[i] * 2);
}`,
                    good: `const doubled = numbers.map(n => n * 2);`,
                    quiz: {
                        question: 'Which is the best way to filter an array?',
                        options: [
                            { text: 'for loop with if statements', correct: false },
                            { text: 'Array.filter() method', correct: true },
                            { text: 'while loop', correct: false },
                            { text: 'forEach with push', correct: false }
                        ],
                        explanation: 'Array.filter() is declarative, concise, and clearly expresses intent. It\'s also chainable with other array methods.'
                    }
                },
                12: {
                    name: 'ScriptNestedArraySearchRule',
                    title: 'Optimized Search Enchantment',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Replace nested loops with optimized methods like find().',
                    why: 'Nested loops have O(n²) complexity; modern methods can be more efficient.',
                    bad: `let found = null;
for (let i = 0; i < users.length; i++) {
    for (let j = 0; j < orders.length; j++) {
        if (users[i].id === orders[j].userId) {
            found = users[i];
            break;
        }
    }
}`,
                    good: `const found = users.find(user =>
    orders.some(order => order.userId === user.id)
);`,
                    quiz: {
                        question: 'Why are nested loops problematic for searching?',
                        options: [
                            { text: 'They don\'t work correctly', correct: false },
                            { text: 'They have O(n²) time complexity', correct: true },
                            { text: 'They use too much memory', correct: false },
                            { text: 'They\'re not readable', correct: false }
                        ],
                        explanation: 'Nested loops multiply iteration counts, creating quadratic time complexity. Methods like find() and Map lookups can optimize this.'
                    }
                },
                13: {
                    name: 'ScriptMagicNumberRule',
                    title: 'Banishing Magic Numbers',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Replace unexplained numeric literals with named constants.',
                    why: 'Magic numbers lack context; named constants are self-documenting.',
                    bad: `if (user.age < 18) { return false; }
const tax = price * 0.08;`,
                    good: `const MINIMUM_AGE = 18;
const TAX_RATE = 0.08;

if (user.age < MINIMUM_AGE) { return false; }
const tax = price * TAX_RATE;`,
                    quiz: {
                        question: 'What is a "magic number"?',
                        options: [
                            { text: 'A random number generator', correct: false },
                            { text: 'An unexplained numeric literal in code', correct: true },
                            { text: 'A special mathematical constant', correct: false },
                            { text: 'An encrypted value', correct: false }
                        ],
                        explanation: 'Magic numbers are unexplained numeric literals. Replace them with named constants to clarify their meaning and purpose.'
                    }
                },
                14: {
                    name: 'ScriptDescriptiveParameterRule',
                    title: 'The Art of Meaningful Names',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Use parameter names that convey purpose and expected types.',
                    why: 'Descriptive names serve as inline documentation.',
                    bad: `function process(x, y, z) {
    return x + y * z;
}`,
                    good: `function calculateOrderTotal(basePrice, quantity, taxRate) {
    return basePrice + quantity * taxRate;
}`,
                    quiz: {
                        question: 'Which parameter name is most descriptive?',
                        options: [
                            { text: 'data', correct: false },
                            { text: 'userEmailAddress', correct: true },
                            { text: 'x', correct: false },
                            { text: 'str', correct: false }
                        ],
                        explanation: 'userEmailAddress is specific and clearly indicates both what the data represents and its expected format.'
                    }
                },
                15: {
                    name: 'ScriptFunctionReturnConsistencyRule',
                    title: 'Return Type Harmony',
                    category: 'Script Rules',
                    severity: 'ACTION',
                    description: 'Ensure functions return consistent types across all code paths.',
                    why: 'Inconsistent return types cause type-related bugs and confusion.',
                    bad: `function getUser(id) {
    if (id > 0) {
        return { id, name: "User" };
    }
    return null; // Inconsistent! Sometimes object, sometimes null
}`,
                    good: `function getUser(id) {
    if (id > 0) {
        return { id, name: "User" };
    }
    return { id: null, name: "Guest" }; // Always returns same shape
}`,
                    quiz: {
                        question: 'Why should return types be consistent?',
                        options: [
                            { text: 'To save memory', correct: false },
                            { text: 'To prevent type-related bugs and enable better tooling', correct: true },
                            { text: 'To make code compile faster', correct: false },
                            { text: 'It\'s just a stylistic choice', correct: false }
                        ],
                        explanation: 'Consistent return types prevent runtime type errors and enable better IDE support, type checking, and code understanding.'
                    }
                },
                16: {
                    name: 'ScriptStringConcatRule',
                    title: 'Template Literal Mastery',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Use template literals instead of string concatenation.',
                    why: 'Template literals are more readable and less error-prone.',
                    bad: `const greeting = "Hello, " + firstName + " " + lastName + "!";
const url = baseUrl + "/api/" + version + "/users";`,
                    good: `const greeting = \`Hello, \${firstName} \${lastName}!\`;
const url = \`\${baseUrl}/api/\${version}/users\`;`,
                    quiz: {
                        question: 'What is an advantage of template literals?',
                        options: [
                            { text: 'They\'re faster at runtime', correct: false },
                            { text: 'They\'re more readable and support multiline strings', correct: true },
                            { text: 'They use less memory', correct: false },
                            { text: 'They\'re required in modern JS', correct: false }
                        ],
                        explanation: 'Template literals improve readability, support multiline strings naturally, and make string interpolation cleaner.'
                    }
                },
                17: {
                    name: 'ScriptVerboseBooleanCheckRule',
                    title: 'Simplifying Boolean Logic',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Simplify verbose boolean comparisons.',
                    why: 'Explicit boolean comparisons are redundant and reduce readability.',
                    bad: `if (isActive === true) { /*...*/ }
const result = isValid === false ? false : true;`,
                    good: `if (isActive) { /*...*/ }
const result = isValid;`,
                    quiz: {
                        question: 'Which boolean check is cleanest?',
                        options: [
                            { text: 'if (flag === true)', correct: false },
                            { text: 'if (flag)', correct: true },
                            { text: 'if (flag == true)', correct: false },
                            { text: 'if (Boolean(flag) === true)', correct: false }
                        ],
                        explanation: 'Simply using `if (flag)` is the cleanest and most idiomatic. Comparing to true/false is redundant.'
                    }
                },
                18: {
                    name: 'ScriptEmptyFunctionRule',
                    title: 'Detecting Unfinished Spells',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Flag functions with no implementation.',
                    why: 'Empty functions indicate incomplete development or stubs that should be removed.',
                    bad: `function handleError(error) {
    // TODO: implement
}

function validateInput(data) {
}`,
                    good: `function handleError(error) {
    logger.error(error);
    notifyAdmin(error);
}`,
                    quiz: {
                        question: 'When are empty functions acceptable?',
                        options: [
                            { text: 'Never', correct: false },
                            { text: 'As intentional no-op callbacks or during active development', correct: true },
                            { text: 'Always, they\'re fine', correct: false },
                            { text: 'Only in production code', correct: false }
                        ],
                        explanation: 'Empty functions are acceptable as intentional no-ops or TODOs during development, but should be reviewed before production.'
                    }
                },
                19: {
                    name: 'ScriptOnSendSelfDataRule',
                    title: 'Preventing Self-Reference Loops',
                    category: 'Script Rules',
                    severity: 'ACTION',
                    description: 'Validate proper data handling in Pod/PMD scripts to prevent self-references.',
                    why: 'Self-referencing data can cause infinite loops and memory issues.',
                    bad: `onSend() {
    return this; // Sends entire object, potential circular ref
}`,
                    good: `onSend() {
    return { id: this.id, name: this.name }; // Only needed data
}`,
                    quiz: {
                        question: 'Why avoid self-references in data?',
                        options: [
                            { text: 'They make code slower', correct: false },
                            { text: 'They can cause circular references and serialization issues', correct: true },
                            { text: 'They use too much bandwidth', correct: false },
                            { text: 'They\'re not a real problem', correct: false }
                        ],
                        explanation: 'Self-references create circular structures that break JSON serialization and can cause infinite loops.'
                    }
                },
                20: {
                    name: 'ScriptUnusedFunctionRule',
                    title: 'Exorcising Unused Functions',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Remove functions that are never called.',
                    why: 'Unused functions bloat code and create maintenance burden.',
                    bad: `function helper1() { return "used"; }
function helper2() { return "never called"; }

export function main() {
    return helper1(); // helper2 is unused
}`,
                    good: `function helper1() { return "used"; }

export function main() {
    return helper1(); // Clean, no unused code
}`,
                    quiz: {
                        question: 'What should you do with unused functions?',
                        options: [
                            { text: 'Keep them for future use', correct: false },
                            { text: 'Remove them to reduce code bloat', correct: true },
                            { text: 'Comment them out', correct: false },
                            { text: 'Leave them, they don\'t hurt', correct: false }
                        ],
                        explanation: 'Remove unused functions. If needed later, version control preserves them. Keeping them creates maintenance burden.'
                    }
                },
                21: {
                    name: 'ScriptUnusedFunctionParametersRule',
                    title: 'Parameter Pruning Spell',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Remove unused function parameters.',
                    why: 'Unused parameters confuse readers about what data the function needs.',
                    bad: `function greet(name, age, city) {
    return \`Hello, \${name}!\`; // age and city unused
}`,
                    good: `function greet(name) {
    return \`Hello, \${name}!\`; // Only what's needed
}`,
                    quiz: {
                        question: 'Why remove unused parameters?',
                        options: [
                            { text: 'To improve performance', correct: false },
                            { text: 'To clarify function requirements and reduce confusion', correct: true },
                            { text: 'To save memory', correct: false },
                            { text: 'It\'s not important', correct: false }
                        ],
                        explanation: 'Unused parameters mislead readers about what the function actually needs, making the API confusing.'
                    }
                },
                22: {
                    name: 'ScriptUnusedVariableRule',
                    title: 'Variable Vanishing Act',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Remove declared but unused variables.',
                    why: 'Unused variables clutter code and may indicate bugs.',
                    bad: `function process() {
    const used = "data";
    const unused = "never referenced";
    return used;
}`,
                    good: `function process() {
    const used = "data";
    return used;
}`,
                    quiz: {
                        question: 'What can unused variables indicate?',
                        options: [
                            { text: 'Nothing, they\'re harmless', correct: false },
                            { text: 'Incomplete code or potential bugs', correct: true },
                            { text: 'Good planning for future features', correct: false },
                            { text: 'Better performance', correct: false }
                        ],
                        explanation: 'Unused variables often indicate incomplete implementation, refactoring remnants, or logic errors.'
                    }
                },
                23: {
                    name: 'ScriptUnusedIncludesRule',
                    title: 'Import Cleansing Ritual',
                    category: 'Script Rules',
                    severity: 'ADVICE',
                    description: 'Remove unnecessary #include directives.',
                    why: 'Unused includes increase bundle size and compilation time.',
                    bad: `#include "moduleA"
#include "moduleB"
#include "moduleC"

// Only using moduleA`,
                    good: `#include "moduleA"

// Only what's needed`,
                    quiz: {
                        question: 'Why remove unused includes?',
                        options: [
                            { text: 'They cause runtime errors', correct: false },
                            { text: 'They increase bundle size and build time', correct: true },
                            { text: 'They make code unreadable', correct: false },
                            { text: 'They don\'t matter', correct: false }
                        ],
                        explanation: 'Unused includes bloat your bundle and increase compilation time without providing any value.'
                    }
                },
                24: {
                    name: 'EndpointFailOnStatusCodesRule',
                    title: 'Error Status Enchantment',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Ensure endpoints properly configure failure status codes.',
                    why: 'Proper error handling requires explicit failure status configuration.',
                    bad: `endpoint: {
    url: "/api/users",
    method: "GET"
    // Missing failOnStatusCodes!
}`,
                    good: `endpoint: {
    url: "/api/users",
    method: "GET",
    failOnStatusCodes: [400, 401, 403, 404, 500]
}`,
                    quiz: {
                        question: 'Why configure failOnStatusCodes?',
                        options: [
                            { text: 'To make requests faster', correct: false },
                            { text: 'To properly handle API error responses', correct: true },
                            { text: 'It\'s optional and not important', correct: false },
                            { text: 'To prevent network calls', correct: false }
                        ],
                        explanation: 'Configuring failure status codes ensures your application properly detects and handles API errors.'
                    }
                },
                25: {
                    name: 'NoIsCollectionOnEndpointsRule',
                    title: 'Collection Property Guard',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Prevent misuse of isCollection property on endpoints.',
                    why: 'isCollection should not be used in endpoint definitions.',
                    bad: `endpoint: {
    url: "/api/users",
    isCollection: true // Wrong place!
}`,
                    good: `endpoint: {
    url: "/api/users",
    // isCollection handled separately
}`,
                    quiz: {
                        question: 'Where should isCollection NOT be used?',
                        options: [
                            { text: 'In data models', correct: false },
                            { text: 'In endpoint definitions', correct: true },
                            { text: 'In widget configurations', correct: false },
                            { text: 'Nowhere, it\'s always fine', correct: false }
                        ],
                        explanation: 'The isCollection property should not appear in endpoint definitions; it belongs elsewhere in the configuration.'
                    }
                },
                26: {
                    name: 'OnlyMaximumEffortRule',
                    title: 'Effort Level Validation',
                    category: 'Structure Rules',
                    severity: 'ADVICE',
                    description: 'Validate proper configuration of effort levels.',
                    why: 'Incorrect effort levels can cause performance issues.',
                    bad: `endpoint: {
    effort: "medium" // Invalid value
}`,
                    good: `endpoint: {
    effort: "maximum" // Valid effort level
}`,
                    quiz: {
                        question: 'What is the valid effort level for endpoints?',
                        options: [
                            { text: 'minimum', correct: false },
                            { text: 'maximum', correct: true },
                            { text: 'medium', correct: false },
                            { text: 'auto', correct: false }
                        ],
                        explanation: 'Endpoints should use "maximum" as the effort level for proper resource allocation.'
                    }
                },
                27: {
                    name: 'NoPMDSessionVariablesRule',
                    title: 'Session Isolation Shield',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Prohibit session variables in PMD files for security.',
                    why: 'Session variables in PMDs can leak data between users.',
                    bad: `// In PMD
let sessionData = {}; // Security risk!`,
                    good: `// In PMD
// Use request-scoped data instead`,
                    quiz: {
                        question: 'Why avoid session variables in PMDs?',
                        options: [
                            { text: 'They use too much memory', correct: false },
                            { text: 'They can leak data between users', correct: true },
                            { text: 'They make code slower', correct: false },
                            { text: 'They\'re deprecated', correct: false }
                        ],
                        explanation: 'Session variables in PMDs can accidentally share data between different user sessions, creating security vulnerabilities.'
                    }
                },
                28: {
                    name: 'EndpointNameLowerCamelCaseRule',
                    title: 'Endpoint Naming Harmony',
                    category: 'Structure Rules',
                    severity: 'ADVICE',
                    description: 'Use camelCase for endpoint names.',
                    why: 'Consistent naming improves code readability.',
                    bad: `endpoint get_user_data { }
endpoint UserProfile { }`,
                    good: `endpoint getUserData { }
endpoint userProfile { }`,
                    quiz: {
                        question: 'What naming convention for endpoints?',
                        options: [
                            { text: 'snake_case', correct: false },
                            { text: 'camelCase', correct: true },
                            { text: 'PascalCase', correct: false },
                            { text: 'kebab-case', correct: false }
                        ],
                        explanation: 'Endpoints should use camelCase naming for consistency with JavaScript conventions.'
                    }
                },
                29: {
                    name: 'EndpointBaseUrlTypeRule',
                    title: 'Base URL Type Guard',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Validate base URL property types.',
                    why: 'Incorrect types cause runtime errors.',
                    bad: `endpoint: {
    baseUrl: 12345 // Should be string!
}`,
                    good: `endpoint: {
    baseUrl: "https://api.example.com"
}`,
                    quiz: {
                        question: 'What type should baseUrl be?',
                        options: [
                            { text: 'Number', correct: false },
                            { text: 'String', correct: true },
                            { text: 'Object', correct: false },
                            { text: 'Array', correct: false }
                        ],
                        explanation: 'Base URLs must be strings representing valid URLs.'
                    }
                },
                30: {
                    name: 'PMDSectionOrderingRule',
                    title: 'PMD Structure Harmony',
                    category: 'Structure Rules',
                    severity: 'ADVICE',
                    description: 'Enforce consistent section ordering in PMD files.',
                    why: 'Consistent ordering improves navigation and understanding.',
                    bad: `// PMD sections in random order
widgets: {}
endpoints: {}
config: {}`,
                    good: `// PMD sections in standard order
config: {}
endpoints: {}
widgets: {}`,
                    quiz: {
                        question: 'Why enforce section ordering?',
                        options: [
                            { text: 'It\'s required by the compiler', correct: false },
                            { text: 'It improves code organization and readability', correct: true },
                            { text: 'It makes code run faster', correct: false },
                            { text: 'It prevents bugs', correct: false }
                        ],
                        explanation: 'Consistent section ordering makes PMD files easier to navigate and understand across the codebase.'
                    }
                },
                31: {
                    name: 'PMDSecurityDomainRule',
                    title: 'Security Domain Validation',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Validate security domain configurations in PMDs.',
                    why: 'Proper security domains prevent unauthorized access.',
                    bad: `security: {
    domain: "invalid" // Wrong domain!
}`,
                    good: `security: {
    domain: "authenticated"
}`,
                    quiz: {
                        question: 'Why validate security domains?',
                        options: [
                            { text: 'To improve performance', correct: false },
                            { text: 'To prevent unauthorized access', correct: true },
                            { text: 'To reduce file size', correct: false },
                            { text: 'It\'s optional', correct: false }
                        ],
                        explanation: 'Proper security domain validation ensures only authorized users can access protected resources.'
                    }
                },
                32: {
                    name: 'WidgetIdRequiredRule',
                    title: 'Widget Identity Spell',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Require all widgets to have unique IDs.',
                    why: 'Widget IDs are necessary for referencing and manipulation.',
                    bad: `widget: {
    type: "button"
    // Missing id!
}`,
                    good: `widget: {
    id: "submitButton",
    type: "button"
}`,
                    quiz: {
                        question: 'Why are widget IDs required?',
                        options: [
                            { text: 'For styling purposes only', correct: false },
                            { text: 'For referencing and programmatic manipulation', correct: true },
                            { text: 'They\'re optional', correct: false },
                            { text: 'To save memory', correct: false }
                        ],
                        explanation: 'Widget IDs are essential for referencing widgets in code and enabling dynamic manipulation.'
                    }
                },
                33: {
                    name: 'WidgetIdLowerCamelCaseRule',
                    title: 'Widget ID Naming Convention',
                    category: 'Structure Rules',
                    severity: 'ADVICE',
                    description: 'Use camelCase for widget IDs.',
                    why: 'Consistent naming improves maintainability.',
                    bad: `widget: {
    id: "submit_button" // snake_case
}`,
                    good: `widget: {
    id: "submitButton" // camelCase
}`,
                    quiz: {
                        question: 'What naming convention for widget IDs?',
                        options: [
                            { text: 'snake_case', correct: false },
                            { text: 'camelCase', correct: true },
                            { text: 'UPPER_CASE', correct: false },
                            { text: 'Any is fine', correct: false }
                        ],
                        explanation: 'Widget IDs should use camelCase for consistency with JavaScript property access patterns.'
                    }
                },
                34: {
                    name: 'FooterPodRequiredRule',
                    title: 'Footer Pod Requirement',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Validate required footer pod configurations.',
                    why: 'Footer pods are required for proper widget structure.',
                    bad: `widget: {
    header: {},
    body: {}
    // Missing footer!
}`,
                    good: `widget: {
    header: {},
    body: {},
    footer: {}
}`,
                    quiz: {
                        question: 'Which widget sections are required?',
                        options: [
                            { text: 'Only header', correct: false },
                            { text: 'Header, body, and footer', correct: true },
                            { text: 'Only body', correct: false },
                            { text: 'Header and body', correct: false }
                        ],
                        explanation: 'Complete widget structures require header, body, and footer sections for proper functionality.'
                    }
                },
                35: {
                    name: 'StringBooleanRule',
                    title: 'Type Purity Enchantment',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Prevent string representations of booleans.',
                    why: 'String booleans cause type coercion bugs.',
                    bad: `config: {
    enabled: "true", // String, not boolean!
    visible: "false"
}`,
                    good: `config: {
    enabled: true,
    visible: false
}`,
                    quiz: {
                        question: 'Why avoid string booleans?',
                        options: [
                            { text: 'They use more memory', correct: false },
                            { text: 'They cause type coercion bugs', correct: true },
                            { text: 'They\'re deprecated', correct: false },
                            { text: 'They\'re fine to use', correct: false }
                        ],
                        explanation: 'String "true"/"false" are truthy/falsy in unexpected ways. Use actual booleans for clarity and correctness.'
                    }
                },
                36: {
                    name: 'FileNameLowerCamelCaseRule',
                    title: 'File Naming Consistency',
                    category: 'Structure Rules',
                    severity: 'ADVICE',
                    description: 'Use camelCase for file names.',
                    why: 'Consistent file naming improves organization.',
                    bad: `user_profile.js
UserData.js`,
                    good: `userProfile.js
userData.js`,
                    quiz: {
                        question: 'What file naming convention to use?',
                        options: [
                            { text: 'snake_case', correct: false },
                            { text: 'camelCase', correct: true },
                            { text: 'PascalCase', correct: false },
                            { text: 'Any is acceptable', correct: false }
                        ],
                        explanation: 'Files should use camelCase for consistency with module naming conventions.'
                    }
                },
                37: {
                    name: 'MultipleStringInterpolatorsRule',
                    title: 'String Interpolation Optimization',
                    category: 'Structure Rules',
                    severity: 'ADVICE',
                    description: 'Consolidate multiple string interpolators.',
                    why: 'Multiple interpolators reduce readability.',
                    bad: `const msg = \`Hello \${firstName}\` + \` \${lastName}\`;`,
                    good: `const msg = \`Hello \${firstName} \${lastName}\`;`,
                    quiz: {
                        question: 'How to combine multiple string parts?',
                        options: [
                            { text: 'Use + concatenation', correct: false },
                            { text: 'Use single template literal', correct: true },
                            { text: 'Use multiple templates', correct: false },
                            { text: 'Use array join', correct: false }
                        ],
                        explanation: 'A single template literal is cleaner and more maintainable than concatenating multiple strings.'
                    }
                },
                38: {
                    name: 'GridPagingWithSortableFilterableRule',
                    title: 'Grid Configuration Validation',
                    category: 'Structure Rules',
                    severity: 'ADVICE',
                    description: 'Validate pagination with sortable/filterable grid properties.',
                    why: 'Proper grid configuration ensures good UX.',
                    bad: `grid: {
    paging: true,
    sortable: false // Inconsistent config
}`,
                    good: `grid: {
    paging: true,
    sortable: true,
    filterable: true
}`,
                    quiz: {
                        question: 'What should paginated grids include?',
                        options: [
                            { text: 'Only pagination', correct: false },
                            { text: 'Pagination, sorting, and filtering', correct: true },
                            { text: 'Only sorting', correct: false },
                            { text: 'No special config needed', correct: false }
                        ],
                        explanation: 'Paginated grids should also support sorting and filtering for a complete user experience.'
                    }
                },
                39: {
                    name: 'HardcodedApplicationIdRule',
                    title: 'Application ID Externalization',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Prevent hardcoded application IDs.',
                    why: 'Hardcoded IDs prevent code reusability across environments.',
                    bad: `const appId = "12345"; // Hardcoded!`,
                    good: `const appId = config.applicationId; // From config`,
                    quiz: {
                        question: 'Why externalize application IDs?',
                        options: [
                            { text: 'To improve performance', correct: false },
                            { text: 'To enable environment-specific configuration', correct: true },
                            { text: 'To reduce file size', correct: false },
                            { text: 'It\'s not necessary', correct: false }
                        ],
                        explanation: 'External configuration allows the same code to work across dev, staging, and production environments.'
                    }
                },
                40: {
                    name: 'EmbeddedImagesRule',
                    title: 'Image Externalization Spell',
                    category: 'Structure Rules',
                    severity: 'ADVICE',
                    description: 'Externalize embedded images.',
                    why: 'Embedded images bloat source files and hurt maintainability.',
                    bad: `const img = "data:image/png;base64,iVBOR..."; // Huge!`,
                    good: `const img = "/assets/images/logo.png"; // Referenced`,
                    quiz: {
                        question: 'Why externalize images?',
                        options: [
                            { text: 'They load faster when embedded', correct: false },
                            { text: 'To reduce file size and improve maintainability', correct: true },
                            { text: 'Embedded images are better', correct: false },
                            { text: 'No real benefit', correct: false }
                        ],
                        explanation: 'External images keep source files clean, enable caching, and make asset management easier.'
                    }
                },
                41: {
                    name: 'HardcodedWidRule',
                    title: 'Widget ID Parameterization',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Prevent hardcoded Widget IDs.',
                    why: 'Hardcoded IDs reduce code flexibility.',
                    bad: `const widgetId = "wid123"; // Hardcoded`,
                    good: `const widgetId = config.widgets.primary; // Configured`,
                    quiz: {
                        question: 'Why parameterize widget IDs?',
                        options: [
                            { text: 'To save memory', correct: false },
                            { text: 'To enable flexible widget configuration', correct: true },
                            { text: 'It makes no difference', correct: false },
                            { text: 'To improve performance', correct: false }
                        ],
                        explanation: 'Parameterized widget IDs allow dynamic configuration and better code reuse across different contexts.'
                    }
                },
                42: {
                    name: 'HardcodedWorkdayAPIRule',
                    title: 'API Endpoint Configuration',
                    category: 'Structure Rules',
                    severity: 'ACTION',
                    description: 'Use configuration for API endpoints instead of hardcoding.',
                    why: 'Hardcoded endpoints prevent environment flexibility.',
                    bad: `const api = "https://api.workday.com/v1"; // Hardcoded`,
                    good: `const api = config.workdayApiEndpoint; // From config`,
                    quiz: {
                        question: 'Why configure API endpoints?',
                        options: [
                            { text: 'URLs might change between environments', correct: true },
                            { text: 'It makes code run faster', correct: false },
                            { text: 'It\'s just a best practice with no real benefit', correct: false },
                            { text: 'To reduce file size', correct: false }
                        ],
                        explanation: 'API endpoints vary between dev, staging, and production. Configuration enables seamless environment switching.'
                    }
                }
            }
        };

        // Navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const view = tab.dataset.view;
                gameState.currentView = view;
                loadView(view);
            });
        });

        function loadView(view) {
            const content = document.getElementById('contentArea');

            switch(view) {
                case 'spellbooks':
                    renderSpellbooks(content);
                    break;
                case 'practice':
                    renderPracticeMode(content);
                    break;
                case 'challenge':
                    renderChallengeMode(content);
                    break;
                case 'achievements':
                    renderAchievements(content);
                    break;
            }
        }

        function renderSpellbooks(container) {
            const spellbooksHTML = rulesDatabase.spellbooks.map(book => {
                const completed = book.rules.filter(r => gameState.rulesCompleted.has(r)).length;
                const total = book.rules.length;
                const isCompleted = completed === total;

                return `
                    <div class="spellbook-card ${isCompleted ? 'completed' : ''}" onclick="openSpellbook('${book.id}')">
                        <div class="spellbook-title">${book.title}</div>
                        <div class="spellbook-desc">${book.description}</div>
                        <div class="spellbook-progress">
                            <span>${completed}/${total} Rules Mastered</span>
                            <span>${Math.round((completed/total)*100)}%</span>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = `
                <h2>Choose Your Path</h2>
                <p>Select a spellbook to begin your training in the arcane arts of code quality.</p>
                <div class="spellbook-grid">
                    ${spellbooksHTML}
                </div>
            `;
        }

        function openSpellbook(bookId) {
            const book = rulesDatabase.spellbooks.find(b => b.id === bookId);
            const container = document.getElementById('contentArea');

            const rulesHTML = book.rules.map(ruleNum => {
                const rule = rulesDatabase.rules[ruleNum];
                const isCompleted = gameState.rulesCompleted.has(ruleNum);
                const isCurrent = gameState.currentLesson === ruleNum;

                return `
                    <li class="rule-item ${isCompleted ? 'completed' : ''} ${isCurrent ? 'current' : ''}"
                        onclick="startLesson(${ruleNum})">
                        <span class="rule-number">Rule ${ruleNum}</span>
                        <span class="rule-name">${rule.name}</span>
                        ${isCompleted ? ' ✓' : ''}
                    </li>
                `;
            }).join('');

            container.innerHTML = `
                <button class="btn btn-secondary" onclick="loadView('spellbooks')">← Back to Spellbooks</button>
                <h2>${book.title}</h2>
                <p>${book.description}</p>
                <ul class="rule-list">
                    ${rulesHTML}
                </ul>
            `;
        }

        function startLesson(ruleNum) {
            gameState.currentLesson = ruleNum;
            const rule = rulesDatabase.rules[ruleNum];
            const container = document.getElementById('contentArea');

            container.innerHTML = `
                <div class="lesson-view">
                    <button class="btn btn-secondary" onclick="loadView('spellbooks')">← Back</button>

                    <div class="lesson-header">
                        <div class="rule-number">Rule ${ruleNum} of 42</div>
                        <h1 class="lesson-title">${rule.title}</h1>
                        <div class="lesson-severity severity-${rule.severity.toLowerCase()}">${rule.severity}</div>
                    </div>

                    <div class="lesson-section">
                        <h3>📖 What This Rule Does</h3>
                        <p>${rule.description}</p>
                    </div>

                    <div class="lesson-section">
                        <h3>🤔 Why It Matters</h3>
                        <p>${rule.why}</p>
                    </div>

                    <div class="lesson-section">
                        <h3>❌ Bad Example</h3>
                        <pre class="code-example code-bad">${rule.bad}</pre>
                    </div>

                    <div class="lesson-section">
                        <h3>✅ Good Example</h3>
                        <pre class="code-example code-good">${rule.good}</pre>
                    </div>

                    <div class="practice-area" id="quizArea">
                        <h3>⚔️ Test Your Knowledge</h3>
                        <div class="practice-question">${rule.quiz.question}</div>
                        <div class="answer-options" id="answerOptions">
                            ${rule.quiz.options.map((opt, idx) => `
                                <button class="answer-btn" onclick="checkAnswer(${ruleNum}, ${idx})">${opt.text}</button>
                            `).join('')}
                        </div>
                        <div id="feedback"></div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn" onclick="nextLesson(${ruleNum})">Next Rule →</button>
                    </div>
                </div>
            `;
        }

        function checkAnswer(ruleNum, optionIdx) {
            const rule = rulesDatabase.rules[ruleNum];
            const option = rule.quiz.options[optionIdx];
            const buttons = document.querySelectorAll('.answer-btn');
            const feedback = document.getElementById('feedback');

            gameState.totalAttempts++;

            buttons.forEach((btn, idx) => {
                btn.disabled = true;
                if (rule.quiz.options[idx].correct) {
                    btn.classList.add('correct');
                } else if (idx === optionIdx && !option.correct) {
                    btn.classList.add('incorrect');
                }
            });

            if (option.correct) {
                gameState.totalCorrect++;
                if (!gameState.rulesCompleted.has(ruleNum)) {
                    gameState.rulesCompleted.add(ruleNum);
                    addXP(50);
                    checkAchievements();
                }

                feedback.innerHTML = `
                    <div class="feedback feedback-success">
                        <h3>✨ Correct!</h3>
                        <p>${rule.quiz.explanation}</p>
                        <p><strong>+50 XP!</strong> ${gameState.rulesCompleted.has(ruleNum) ? '' : 'Rule mastered!'}</p>
                    </div>
                `;
            } else {
                feedback.innerHTML = `
                    <div class="feedback feedback-error">
                        <h3>❌ Not quite</h3>
                        <p>${rule.quiz.explanation}</p>
                        <p>Try again to master this rule!</p>
                    </div>
                `;
            }

            updateStats();
        }

        function nextLesson(currentRule) {
            const nextRule = currentRule < 42 ? currentRule + 1 : 1;
            startLesson(nextRule);
        }

        function renderPracticeMode(container) {
            const incompletePules = [];
            for (let i = 1; i <= 42; i++) {
                if (!gameState.rulesCompleted.has(i)) {
                    incompleteRules.push(i);
                }
            }

            if (incompleteRules.length === 0) {
                container.innerHTML = `
                    <h2>🎉 All Rules Mastered!</h2>
                    <p>Congratulations! You've mastered all 42 rules. Try Challenge Mode for a timed test!</p>
                    <button class="btn" onclick="document.querySelector('[data-view=challenge]').click()">
                        Go to Challenge Mode →
                    </button>
                `;
                return;
            }

            container.innerHTML = `
                <h2>⚔️ Practice Mode</h2>
                <p>Review and practice rules you haven't mastered yet.</p>
                <p>Remaining rules: <strong>${incompleteRules.length}</strong></p>
                <div class="action-buttons">
                    <button class="btn" onclick="startLesson(${incompleteRules[0]})">
                        Start Practice Session
                    </button>
                    <button class="btn btn-secondary" onclick="startLesson(${Math.floor(Math.random() * 42) + 1})">
                        Random Rule
                    </button>
                </div>
            `;
        }

        function renderChallengeMode(container) {
            container.innerHTML = `
                <div class="challenge-mode">
                    <h2>🏆 Challenge Mode</h2>
                    <p>Test your mastery of all 42 rules in a timed challenge!</p>
                    <p>Answer as many questions correctly as possible.</p>

                    <div class="challenge-timer">⏱️ Ready?</div>
                    <div class="challenge-score">Score: 0</div>

                    <div class="action-buttons">
                        <button class="btn btn-success" onclick="startChallenge()">
                            Start Challenge
                        </button>
                    </div>

                    <div class="lesson-section">
                        <h3>📋 Challenge Rules</h3>
                        <ul>
                            <li>10 random questions from the 42 rules</li>
                            <li>60 seconds time limit</li>
                            <li>Earn bonus XP for high scores</li>
                            <li>Perfect score unlocks special achievement</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function startChallenge() {
            alert("🏆 Challenge Mode coming soon! Master all the rules first in the Spellbooks.");
            // TODO: Implement timed challenge mode
        }

        function renderAchievements(container) {
            const achievements = [
                { id: 'first_rule', name: 'First Steps', desc: 'Master your first rule', icon: '🎯', condition: () => gameState.rulesCompleted.size >= 1 },
                { id: 'spellbook', name: 'Spellbook Complete', desc: 'Complete any spellbook', icon: '📚', condition: () => rulesDatabase.spellbooks.some(b => b.rules.every(r => gameState.rulesCompleted.has(r))) },
                { id: 'ten_rules', name: 'Apprentice Auditor', desc: 'Master 10 rules', icon: '🧙‍♂️', condition: () => gameState.rulesCompleted.size >= 10 },
                { id: 'half_way', name: 'Halfway There', desc: 'Master 21 rules', icon: '⚡', condition: () => gameState.rulesCompleted.size >= 21 },
                { id: 'master', name: 'Master Auditor', desc: 'Master all 42 rules', icon: '👑', condition: () => gameState.rulesCompleted.size === 42 },
                { id: 'accuracy', name: 'Precision Expert', desc: '90%+ accuracy', icon: '🎯', condition: () => gameState.totalAttempts > 20 && (gameState.totalCorrect / gameState.totalAttempts) >= 0.9 },
                { id: 'level_5', name: 'Code Wizard', desc: 'Reach level 5', icon: '🔮', condition: () => gameState.playerLevel >= 5 },
                { id: 'level_10', name: 'Arcane Master', desc: 'Reach level 10', icon: '✨', condition: () => gameState.playerLevel >= 10 }
            ];

            const achievementsHTML = achievements.map(ach => {
                const unlocked = ach.condition();
                if (unlocked) gameState.achievements.add(ach.id);

                return `
                    <div class="achievement-card ${unlocked ? 'unlocked' : 'locked'}">
                        <div class="achievement-icon">${ach.icon}</div>
                        <h3>${ach.name}</h3>
                        <p>${ach.desc}</p>
                        ${unlocked ? '<div class="badge">Unlocked!</div>' : ''}
                    </div>
                `;
            }).join('');

            container.innerHTML = `
                <h2>🎖️ Achievements</h2>
                <p>Track your progress and unlock special badges!</p>
                <div class="achievements-grid">
                    ${achievementsHTML}
                </div>
            `;

            saveProgress();
        }

        function checkAchievements() {
            // Trigger achievement animations/notifications
            const prevSize = gameState.achievements.size;
            renderAchievements(document.createElement('div')); // Updates achievements
            if (gameState.achievements.size > prevSize) {
                // New achievement unlocked!
                setTimeout(() => alert('🎉 New Achievement Unlocked!'), 500);
            }
        }

        // Initialize
        loadProgress();
        updateStats();
        loadView('spellbooks');
    </script>
</body>
</html>